<div class="flex-row app-container">
  <dp-sidebar
    [@collapsed]="sidebarCollapsed ? 'collapsed' : 'notCollapsed'"
    (mouseenter)="openSidebar()"
    (mouseleave)="colapseSidebar()"
  ></dp-sidebar>
  <div
    *ngIf="selectedDomain$ | async as selectedDomain"
    class="flex-column"
    style="width: 100%; gap: 1.3rem; height: 90%"
  >
    <div class="header flex-row" style="gap: 1.2rem">
      <img
        [src]="'../assets/' + selectedDomain.imageUrl"
        alt="Starbucks loog"
        height="100px"
      />
      <div class="flex-column">
        <h2>{{ selectedDomain.name }}</h2>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Consectetur
          magni ea sint, repellendus quam dolor consequatur sequi.
        </p>
      </div>
    </div>

    <div class="source-selector flex-row align-center">
      <div
        *ngFor="let source of selectedDomain.sources"
        class="source-cat flex-column center"
      >
        <img
          [src]="'../assets/' + source.source_image_name"
          height="100px"
          style="border-radius: 50%"
        />
        <p>{{ source.source_name }}</p>
      </div>

      <div
        (click)="toggleAddSourcesModal()"
        class="source-cat flex-column center"
      >
        <p style="font-size: 80pt">+</p>
      </div>
    </div>

    <statistic-selector></statistic-selector>

    <div
      class="source-manager flex-row"
      style="background-color: aliceblue; border-radius: 25px; height: 260px"
    ></div>
  </div>
</div>

<dp-modal-container
  [modalDisplay]="showAddSourcesModal"
  (close)="toggleAddSourcesModal()"
>
  <div class="flex-row" style="width: 60vw; height: 60vh; color: black">
    <div class="flex-column center" style="flex-basis: 55%; gap: 1.1rem">
      <p style="color: blue; font-size: 26pt; font-weight: 500">Add a Source</p>

      <div class="flex-row" style="width: 80%">
        <p style="font-size: 44pt; color: rgb(168, 168, 168)">1</p>
        <div class="flex-column" style="width: 100%">
          <p style="font-size: 17pt; font-weight: 500; color: rgb(46, 46, 46)">
            Source Name:
          </p>
          <input class="default-input" [(ngModel)]="newSouceName" type="text" />
        </div>
      </div>

      <div class="flex-row" style="width: 80%">
        <p style="font-size: 44pt; color: rgb(168, 168, 168)">2</p>
        <div class="flex-column" style="width: 100%">
          <p style="font-size: 17pt; font-weight: 500; color: rgb(46, 46, 46)">
            Source Type:
          </p>
          <select
            [(ngModel)]="newSourcePlatform"
            style="
              border: solid rgb(133, 133, 133) 2px;
              height: 30px;
              border-radius: 10px;
            "
          >
            <option value="facebook">facebook</option>
            <option value="instagram">instagram</option>
            <option value="reddit">reddit</option>
          </select>
        </div>
      </div>

      <div class="flex-row" style="width: 80%">
        <p style="font-size: 44pt; color: rgb(168, 168, 168)">3</p>
        <div class="flex-column" style="width: 100%">
          <p style="font-size: 17pt; font-weight: 500; color: rgb(46, 46, 46)">
            Source url:
          </p>
          <input class="default-input" type="text" />
        </div>
      </div>

      <button class="new-source-btn" (click)="addNewSource()">Confirm</button>
    </div>
    <div
      class="picture"
      style="
        flex-basis: 45%;
        background-color: blue;
        border-top-right-radius: 25px;
        border-bottom-right-radius: 25px;
      "
    ></div>
  </div>
</dp-modal-container>
